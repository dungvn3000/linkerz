<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:scala="http://www.adesso.de/schema/scala"
       xsi:schemaLocation=
               "http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.adesso.de/schema/scala http://www.adesso.de/schema/scala-0.2.xsd">

    <bean id="crawlerController" class="org.linkerz.crawler.core.controller.CrawlerController" init-method="start" destroy-method="stop">
        <property name="handlers">
            <scala:list>
                <ref bean="newFeedHandler"/>
            </scala:list>
        </property>
    </bean>

    <bean id="newFeedHandler" class="org.linkerz.crawler.bot.handler.NewFeedHandler">
        <!--Number of worker-->
        <constructor-arg value="5"/>
        <constructor-arg ref="downloadFactory"/>
        <constructor-arg ref="parserFactory"/>
        <property name="dbService" ref="dBService"/>
        <property name="ideTime" value="5000"/>
        <property name="maxRetry" value="10"/>
        <property name="maxDepth" value="1"/>
        <property name="onlyCrawlInSameDomain" value="true"/>
        <property name="politenessDelay" value="5000"/>
    </bean>

    <bean id="dBService" class="org.linkerz.crawler.db.DBServiceImpl">
        <property name="mongoOperations" ref="mongoTemplate"/>
    </bean>

    <bean id="parserFactory" class="org.linkerz.crawler.bot.factory.ParserPluginFactory">
        <property name="mongoOperations" ref="mongoTemplate"/>
    </bean>

    <bean id="downloadFactory" class="org.linkerz.crawler.core.factory.DefaultDownloadFactory"/>

    <bean id="newFeedController" class="org.linkerz.crawler.bot.controller.NewFeedController">
        <property name="mongoOperations" ref="mongoTemplate"/>
        <property name="crawlerController" ref="crawlerController"/>
    </bean>

</beans>